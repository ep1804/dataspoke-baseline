-- 06_shipping.sql — UC3: carrier status tracking (UPS, FedEx, DHL) with delays.

CREATE TABLE shipping.carrier_status (
    tracking_id     SERIAL PRIMARY KEY,
    order_id        VARCHAR(20) NOT NULL,
    carrier         VARCHAR(20) NOT NULL CHECK (carrier IN ('UPS','FedEx','DHL')),
    tracking_number VARCHAR(30) NOT NULL,
    status          VARCHAR(30) NOT NULL CHECK (status IN ('label_created','picked_up','in_transit','out_for_delivery','delivered','delayed','exception')),
    status_detail   TEXT,
    updated_at      TIMESTAMP NOT NULL,
    estimated_delivery DATE
);

INSERT INTO shipping.carrier_status (order_id, carrier, tracking_number, status, status_detail, updated_at, estimated_delivery) VALUES
('ORD-2024-00001', 'UPS',   '1Z999AA10001', 'delivered',        'Left at front door',                     '2024-11-04 14:30:00', '2024-11-04'),
('ORD-2024-00002', 'FedEx', 'FX100200300',  'delivered',        'Signed by M. Jones',                     '2024-11-05 11:00:00', '2024-11-05'),
('ORD-2024-00003', 'DHL',   'DH5001001',    'delivered',        'Delivered to neighbor',                   '2024-11-06 16:20:00', '2024-11-06'),
('ORD-2024-00004', 'UPS',   '1Z999AA10002', 'delivered',        'Left at front door',                     '2024-11-07 13:45:00', '2024-11-07'),
('ORD-2024-00005', 'FedEx', 'FX100200301',  'delivered',        'Signed by T. Nguyen',                    '2024-11-08 10:30:00', '2024-11-08'),
('ORD-2024-00006', 'UPS',   '1Z999AA10003', 'delivered',        'Left with receptionist',                 '2024-11-09 15:10:00', '2024-11-09'),
('ORD-2024-00007', 'DHL',   'DH5001002',    'delivered',        'Signed by S. Müller',                    '2024-11-10 12:00:00', '2024-11-10'),
('ORD-2024-00008', 'FedEx', 'FX100200302',  'delivered',        'Left at front door',                     '2024-11-11 14:20:00', '2024-11-11'),
('ORD-2024-00009', 'UPS',   '1Z999AA10004', 'delivered',        'Signed by C. Rossi',                     '2024-11-12 11:15:00', '2024-11-12'),
('ORD-2024-00010', 'DHL',   'DH5001003',    'delivered',        'Left at parcel locker',                  '2024-11-13 16:45:00', '2024-11-13'),
('ORD-2024-00011', 'UPS',   '1Z999AA10005', 'delivered',        'Signed by A. Dubois',                    '2024-11-14 13:00:00', '2024-11-14'),
('ORD-2024-00012', 'FedEx', 'FX100200303',  'delivered',        'Left at front door',                     '2024-11-15 10:30:00', '2024-11-15'),
('ORD-2024-00013', 'DHL',   'DH5001004',    'delivered',        'Signed by P. Svensson',                  '2024-11-16 15:20:00', '2024-11-16'),
('ORD-2024-00014', 'UPS',   '1Z999AA10006', 'delivered',        'Left at front door',                     '2024-11-17 12:30:00', '2024-11-17'),
('ORD-2024-00015', 'FedEx', 'FX100200304',  'in_transit',       'In transit — Oakland hub',               '2024-11-17 22:00:00', '2024-11-18'),
('ORD-2024-00016', 'DHL',   'DH5001005',    'delivered',        'Signed by F. Bernard',                   '2024-11-19 14:00:00', '2024-11-19'),
('ORD-2024-00017', 'UPS',   '1Z999AA10007', 'delivered',        'Left with building manager',             '2024-11-20 11:45:00', '2024-11-20'),
('ORD-2024-00018', 'FedEx', 'FX100200305',  'delivered',        'Signed by V. Santos',                    '2024-11-21 16:10:00', '2024-11-21'),
('ORD-2024-00019', 'DHL',   'DH5001006',    'delivered',        'Left at front door',                     '2024-11-22 13:30:00', '2024-11-22'),
('ORD-2024-00020', 'UPS',   '1Z999AA10008', 'delivered',        'Signed by D. Chen',                      '2024-11-23 10:00:00', '2024-11-23'),
('ORD-2024-00021', 'FedEx', 'FX100200306',  'delivered',        'Left at mailroom',                       '2024-11-24 14:15:00', '2024-11-24'),
('ORD-2024-00022', 'DHL',   'DH5001007',    'delivered',        'Signed by N. Andersen',                  '2024-11-25 12:30:00', '2024-11-25'),
('ORD-2024-00023', 'UPS',   '1Z999AA10009', 'delivered',        'Left at front door',                     '2024-11-26 11:00:00', '2024-11-26'),
('ORD-2024-00024', 'FedEx', 'FX100200307',  'delayed',          'Weather delay — Memphis hub',            '2024-11-26 08:00:00', '2024-11-27'),
('ORD-2024-00025', 'DHL',   'DH5001008',    'delivered',        'Signed by O. Larsen',                    '2024-11-28 15:30:00', '2024-11-28'),
('ORD-2024-00035', 'UPS',   '1Z999AA10010', 'in_transit',       'In transit — Louisville hub',            '2024-12-06 18:00:00', '2024-12-07'),
('ORD-2024-00039', 'FedEx', 'FX100200308',  'label_created',    'Shipping label created',                 '2024-12-09 14:00:00', '2024-12-12'),
('ORD-2024-00045', 'DHL',   'DH5001009',    'label_created',    'Awaiting pickup',                        '2024-12-15 12:00:00', '2024-12-18'),
('ORD-2024-00050', 'UPS',   '1Z999AA10011', 'out_for_delivery', 'Out for delivery',                       '2024-12-21 07:30:00', '2024-12-21'),
('ORD-2024-00059', 'FedEx', 'FX100200309',  'label_created',    'Shipping label created',                 '2024-12-29 11:30:00', '2025-01-02'),
('ORD-2024-00060', 'DHL',   'DH5001010',    'label_created',    'Awaiting pickup',                        '2024-12-30 09:00:00', '2025-01-03'),
('ORD-2024-00063', 'UPS',   '1Z999AA10012', 'delayed',          'Address correction needed',              '2025-01-03 10:00:00', '2025-01-05'),
('ORD-2024-00067', 'FedEx', 'FX100200310',  'label_created',    'Shipping label created',                 '2025-01-06 15:00:00', '2025-01-09'),
('ORD-2024-00024', 'FedEx', 'FX100200307',  'out_for_delivery', 'Out for delivery after weather delay',   '2024-11-27 08:00:00', '2024-11-27'),
('ORD-2024-00024', 'FedEx', 'FX100200307',  'delivered',        'Signed by K. Nowak',                     '2024-11-27 14:30:00', '2024-11-27'),
('ORD-2024-00035', 'UPS',   '1Z999AA10010', 'delayed',          'Mechanical delay — sort facility',       '2024-12-07 06:00:00', '2024-12-08'),
('ORD-2024-00035', 'UPS',   '1Z999AA10010', 'out_for_delivery', 'Out for delivery',                       '2024-12-08 07:30:00', '2024-12-08'),
('ORD-2024-00063', 'UPS',   '1Z999AA10012', 'in_transit',       'Address corrected, in transit',          '2025-01-04 14:00:00', '2025-01-06'),
('ORD-2024-00050', 'UPS',   '1Z999AA10011', 'delivered',        'Signed by recipient',                    '2024-12-21 15:00:00', '2024-12-21'),
('ORD-2024-00015', 'FedEx', 'FX100200304',  'delayed',          'Customs clearance delay',                '2024-11-18 10:00:00', '2024-11-19');
